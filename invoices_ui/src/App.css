/* App.css - Final Stylesheet with Logout Modal */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code&display=swap');

:root {
    --bg-color: #f4f7fa;
    --sidebar-bg: #1f2937;
    --header-bg: #ffffff;
    --content-bg: #ffffff;
    --border-color: #e5e7eb;
    --text-color: #374151;
    --text-color-light: #6b7280;
    --text-inverse: #ffffff;
    --primary-color: #3b82f6;
    --primary-color-dark: #2563eb;
    --selected-bg: #eff6ff;
    --shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
    --font-main: 'Inter', sans-serif;
    --font-mono: 'Fira Code', monospace;
    --danger-color: #ef4444;
    --danger-color-hover: #dc2626;
}

body { margin: 0; font-family: var(--font-main); color: var(--text-color); background-color: var(--bg-color); box-sizing: border-box; }
*, *:before, *:after { box-sizing: inherit; }

/* --- Login Page --- */
.login-page-container { display: flex; justify-content: center; align-items: center; height: 100vh; }
.login-card { background: var(--header-bg); padding: 40px; border-radius: 12px; box-shadow: var(--shadow); width: 100%; max-width: 400px; text-align: center; }
.login-card h1 { margin-top: 0; font-size: 1.75rem; }
.login-card p { color: var(--text-color-light); margin-bottom: 32px; }
.login-form .input-group { text-align: left; margin-bottom: 20px; }
.login-form label { display: block; margin-bottom: 8px; font-weight: 500; }
.login-form input { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 1rem; }
.login-form .btn { width: 100%; padding: 12px; font-size: 1rem; }

/* --- Main App Layout --- */
.app-layout { display: flex; height: 100vh; }
.app-sidebar { width: 240px; background-color: var(--sidebar-bg); color: var(--text-inverse); padding: 24px; display: flex; flex-direction: column; flex-shrink: 0; }
.app-sidebar-header { margin-bottom: 32px; font-size: 1.5rem; font-weight: 600; text-align: center; }
.app-nav a { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border-radius: 8px; text-decoration: none; color: #d1d5db; font-weight: 500; transition: background-color 0.2s ease, color 0.2s ease; }
.app-nav a:hover { background-color: #374151; }
.app-nav a.active { background-color: var(--primary-color); color: white; }
.app-main-view { display: flex; flex-direction: column; flex-grow: 1; overflow: hidden; position: relative; }
.app-header { display: flex; justify-content: space-between; align-items: center; padding: 16px 24px; background-color: var(--header-bg); border-bottom: 1px solid var(--border-color); flex-shrink: 0; }
.app-header h1 { margin: 0; font-size: 1.5rem; }
.main-content-area { flex-grow: 1; padding: 24px; overflow-y: auto; padding-bottom: 90px; }
.header-right-controls { display: flex; align-items: center; gap: 24px; }
.user-profile { display: flex; align-items: center; gap: 12px; }
.user-profile span { font-weight: 500; }
.logout-btn { background: none; border: 1px solid transparent; color: var(--text-color-light); font-weight: 500; cursor: pointer; padding: 8px; border-radius: 6px; }
.logout-btn:hover { color: var(--danger-color); background-color: #fbebeb; border-color: #f8d7da; }

/* --- Dashboard --- */
.stat-card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 24px; margin-bottom: 32px; }
.stat-card { background: var(--content-bg); padding: 24px; border-radius: 8px; box-shadow: var(--shadow); }
.stat-card .label { color: var(--text-color-light); font-size: 0.9rem; }
.stat-card .value { font-size: 2rem; font-weight: 700; margin-top: 8px; }
.recent-invoices-list .invoice-card { background: var(--content-bg); box-shadow: var(--shadow); }

/* --- Chat Widget --- */
.chat-fab { position: fixed; bottom: 24px; right: 24px; width: 60px; height: 60px; border-radius: 50%; background-color: var(--primary-color); color: white; display: flex; justify-content: center; align-items: center; border: none; cursor: pointer; box-shadow: 0 8px 16px rgba(0,0,0,0.2); transition: transform 0.2s ease; z-index: 1000; }
.chat-fab:hover { transform: scale(1.1); }
.chat-window { position: fixed; bottom: 100px; right: 24px; width: 350px; height: 500px; background-color: var(--content-bg); border-radius: 12px; box-shadow: var(--shadow); display: flex; flex-direction: column; transition: opacity 0.3s ease, transform 0.3s ease; opacity: 0; transform: translateY(20px); pointer-events: none; z-index: 1000; border: 1px solid var(--border-color); }
.chat-window.open { opacity: 1; transform: translateY(0); pointer-events: auto; }
.chat-header { padding: 12px 16px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
.chat-header h4 { margin: 0; }
.chat-header-controls { display: flex; align-items: center; gap: 8px; }
.chat-body { flex-grow: 1; padding: 16px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
.chat-message { display: flex; max-width: 85%; }
.chat-message p { margin: 0; padding: 10px 14px; border-radius: 18px; line-height: 1.4; word-wrap: break-word; }
.chat-message.ai { align-self: flex-start; }
.chat-message.ai p { background-color: var(--bg-color); color: var(--text-color); border-bottom-left-radius: 4px; }
.chat-message.user { align-self: flex-end; }
.chat-message.user p { background-color: var(--primary-color); color: white; border-bottom-right-radius: 4px; }
.chat-input-area { padding: 12px; border-top: 1px solid var(--border-color); }
.chat-input-wrapper { display: flex; align-items: center; gap: 8px; background-color: var(--bg-color); border: 1px solid var(--border-color); border-radius: 24px; padding: 4px 8px; }
.chat-input-wrapper:focus-within { border-color: var(--primary-color); box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2); }
.chat-input-wrapper input[type="text"] { flex-grow: 1; padding: 8px; border: none; background: transparent; outline: none; font-size: 0.9rem; }
.chat-input-wrapper input[type="file"] { display: none; }
.chat-action-btn { background: none; border: none; cursor: pointer; color: var(--text-color-light); padding: 8px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
.chat-action-btn:hover { background-color: #e5e7eb; color: var(--primary-color); }
.send-btn { background-color: var(--primary-color); color: white; }
.send-btn:hover { background-color: var(--primary-color-dark); }
.send-btn:disabled { background-color: #9ca3af; cursor: not-allowed; }
.session-list { padding: 8px; display: flex; flex-direction: column; gap: 8px; }
.session-item { display: flex; align-items: center; gap: 8px; padding: 8px; border-radius: 8px; cursor: pointer; transition: background-color 0.2s ease; border: 1px solid transparent; }
.session-item:hover { background-color: var(--bg-color); border-color: var(--border-color); }
.session-item-details { flex-grow: 1; overflow: hidden; }
.session-item-summary { font-weight: 500; margin-bottom: 4px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; }
.session-item-date { font-size: 0.8rem; color: var(--text-color-light); }
.session-delete-btn { background: none; border: none; padding: 6px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--text-color-light); transition: color 0.2s ease, background-color 0.2s ease; flex-shrink: 0; }
.session-delete-btn:hover { color: var(--danger-color); background-color: #fbebeb; }
.chat-header-title { display: flex; align-items: center; gap: 8px; }

/* --- Invoices View --- */
.invoice-list-panel { width: 100%; height: 100%; background-color: var(--content-bg); display: flex; flex-direction: column; border-radius: 12px; box-shadow: var(--shadow); overflow: hidden; }
.list-header, .list-controls, .pagination-controls { background-color: #fafbfd; }
.invoice-card:hover { background-color: #f9fafb; }
.btn { padding: 10px 20px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: background-color 0.2s ease, box-shadow 0.2s ease; display: flex; align-items: center; justify-content: center; gap: 8px; }
.btn-primary { background-color: var(--primary-color); color: white; }
.btn-primary:hover { background-color: var(--primary-color-dark); }
.btn-danger { background-color: var(--danger-color); color: white; }
.btn-danger:hover { background-color: var(--danger-color-hover); }
.loader { animation: spin 1s linear infinite; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
#invoice-upload-input { display: none; }
.list-header { padding: 16px 20px; border-bottom: 1px solid var(--border-color); font-size: 1rem; font-weight: 600; flex-shrink: 0; display: flex; justify-content: space-between; align-items: center; }
.invoice-list-scroll { flex-grow: 1; overflow-y: auto; padding: 8px; }
.invoice-card { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border-radius: 6px; cursor: pointer; border: 2px solid transparent; transition: background-color 0.2s ease, border-color 0.2s ease, opacity 0.3s ease; position: relative; }
.invoice-card.deleting { opacity: 0.4; pointer-events: none; background-color: rgba(239, 68, 68, 0.1); border-color: var(--danger-color); }
.invoice-card.selected { background-color: var(--selected-bg); border-color: var(--primary-color); }
.file-icon { color: var(--primary-color); flex-shrink: 0; }
.invoice-details { overflow: hidden; flex-grow: 1; }
.invoice-name { font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.invoice-date { font-size: 0.8rem; color: var(--text-color-light); }
.delete-btn { background: none; border: none; padding: 6px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--text-color-light); transition: color 0.2s ease, background-color 0.2s ease; margin-left: auto; flex-shrink: 0; }
.delete-btn:hover { color: var(--danger-color); background-color: #fbebeb; }
.list-controls { padding: 12px 20px; display: flex; gap: 16px; align-items: center; border-bottom: 1px solid var(--border-color); }
.search-input-wrapper { position: relative; flex-grow: 1; }
.search-input { width: 100%; padding: 8px 12px 8px 36px; border-radius: 6px; border: 1px solid var(--border-color); font-size: 0.9rem; }
.search-input-wrapper .search-icon { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: var(--text-color-light); }
.sort-dropdown { padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border-color); font-size: 0.9rem; background-color: white; }
.pagination-controls { padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; border-top: 1px solid var(--border-color); flex-shrink: 0; }
.pagination-btn { padding: 6px 12px; border-radius: 6px; border: 1px solid var(--border-color); background-color: white; cursor: pointer; font-weight: 500; }
.pagination-btn:disabled { cursor: not-allowed; opacity: 0.5; }
.pagination-btn:hover:not(:disabled) { background-color: #f1f3f5; }
.page-info { font-size: 0.9rem; color: var(--text-color-light); }
.status-badge { padding: 2px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-left: auto; margin-right: 8px; flex-shrink: 0; }
.status-badge.refreshing { animation: pulse 1.5s infinite; }
@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
.status-UPLOADED { color: #3b82f6; background-color: rgba(59, 130, 246, 0.1); }
.status-PROCESSING { color: #f59e0b; background-color: rgba(245, 158, 11, 0.1); }
.status-COMPLETED { color: #10b981; background-color: rgba(16, 185, 129, 0.1); }
.status-FAILED { color: #ef4444; background-color: rgba(239, 68, 68, 0.1); }
.refresh-btn { background: none; border: none; cursor: pointer; color: var(--text-color-light); padding: 4px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
.refresh-btn:hover:not(:disabled) { background-color: #f1f3f5; color: var(--text-color); }
.refresh-btn:disabled { cursor: not-allowed; }
.refresh-btn.loading { animation: spin 1s linear infinite; }
.viewer-container { background-color: var(--content-bg); border: 1px solid var(--border-color); height: 100%; display: flex; flex-direction: column; }
.viewer-header { display: flex; align-items: center; gap: 8px; padding: 12px 16px; border-bottom: 1px solid var(--border-color); font-weight: 600; }
.viewer-header h4 { margin: 0; }
.viewer-content { flex-grow: 1; overflow: auto; padding: 16px; font-family: var(--font-mono); font-size: 0.85rem; }
.viewer-content iframe { border: none; }
.placeholder-container { display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; font-family: var(--font-main); }
.json-content pre { margin: 0; }
.json-key { color: #9b59b6; } .json-string { color: #2ecc71; } .json-number { color: #e67e22; } .json-boolean { color: #e74c3c; } .json-null { color: #c03a2b; }
.loading-container { display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; }
.modal-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; }
.modal-content { width: 90%; height: 80%; max-width: 800px; background-color: white; border-radius: 8px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
.modal-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; }
.modal-header h4 { margin: 0; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex-grow: 1; }
.modal-controls { display: flex; align-items: center; gap: 12px; }
.view-toggle-btn { display: flex; align-items: center; gap: 6px; background-color: var(--bg-color); border: 1px solid var(--border-color); padding: 6px 12px; border-radius: 6px; cursor: pointer; font-weight: 500; }
.view-toggle-btn:hover { background-color: #f1f3f5; }
.close-btn { background: none; border: none; cursor: pointer; padding: 4px; display: flex; align-items: center; justify-content: center; }
.modal-body { flex-grow: 1; overflow: hidden; padding: 0; }
.modal-body .viewer-container { width: 100%; height: 100%; border: none; border-radius: 0 0 8px 8px; }
.delete-modal-content { background-color: white; padding: 24px; border-radius: 8px; box-shadow: var(--shadow); width: 90%; max-width: 400px; text-align: center; }
.delete-modal-content h4 { margin-top: 0; font-size: 1.25rem; }
.delete-modal-content p { margin: 16px 0; color: var(--text-color-light); }
.delete-modal-content p strong { color: var(--text-color); }
.delete-modal-actions { display: flex; justify-content: center; gap: 16px; margin-top: 24px; }
.btn-secondary { background-color: var(--bg-color); border: 1px solid var(--border-color); color: var(--text-color); }
.btn-secondary:hover { background-color: #e9ecef; }
.btn-danger:hover { background-color: var(--danger-color-hover); }

/* --- NEW: Logout Confirmation Modal --- */
.logout-modal-content {
    background-color: white;
    padding: 24px;
    border-radius: 8px;
    box-shadow: var(--shadow);
    width: 90%;
    max-width: 400px;
    text-align: center;
}
.logout-modal-content h4 { margin-top: 0; font-size: 1.25rem; }
.logout-modal-content p { margin: 16px 0; color: var(--text-color-light); }
.logout-modal-actions { display: flex; justify-content: center; gap: 16px; margin-top: 24px; }